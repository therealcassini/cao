<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ECharts Canvas高度测试</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        .container {
            flex: 1;
            display: flex;
            flex-direction: column;
            width: 100%;
            padding: 20px;
            box-sizing: border-box;
        }
        .chart-container {
            flex: 1;
            border: 1px solid #e8e8e8;
            border-radius: 8px;
            background-color: #fff;
        }
        h1 {
            text-align: center;
            margin-bottom: 20px;
        }
        .info {
            margin-top: 20px;
            text-align: center;
            font-size: 14px;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ECharts Canvas高度测试</h1>
        <div id="chart" class="chart-container"></div>
        <div class="info">
            <p>这个页面用于测试ECharts的canvas是否能正确填满整个容器</p>
            <p id="dimensions">当前容器尺寸: 加载中...</p>
        </div>
    </div>

    <script>
        // 初始化图表
        const chartDom = document.getElementById('chart');
        const myChart = echarts.init(chartDom);
        
        // 显示初始尺寸信息
        function updateDimensions() {
            const rect = chartDom.getBoundingClientRect();
            document.getElementById('dimensions').textContent = 
                `当前容器尺寸: 宽度=${Math.round(rect.width)}px, 高度=${Math.round(rect.height)}px`;
            
            // 输出canvas信息到控制台
            const canvas = chartDom.querySelector('canvas');
            if (canvas) {
                console.log('Canvas尺寸:', { width: canvas.width, height: canvas.height });
                console.log('Canvas显示尺寸:', { width: canvas.style.width, height: canvas.style.height });
            }
        }
        
        // 配置图表选项
        const option = {
            title: {
                text: '知识图谱示例',
                left: 'center'
            },
            tooltip: {},
            animationDurationUpdate: 1500,
            animationEasingUpdate: 'quinticInOut',
            series: [
                {
                    type: 'graph',
                    layout: 'force',
                    force: {
                        repulsion: 300,
                        edgeLength: 80,
                        gravity: 0.1
                    },
                    roam: true,
                    label: {
                        show: true
                    },
                    data: [
                        { name: '节点1', value: 10 },
                        { name: '节点2', value: 20 },
                        { name: '节点3', value: 15 },
                        { name: '节点4', value: 25 },
                        { name: '节点5', value: 30 }
                    ],
                    links: [
                        { source: '节点1', target: '节点2' },
                        { source: '节点2', target: '节点3' },
                        { source: '节点3', target: '节点1' },
                        { source: '节点4', target: '节点5' },
                        { source: '节点5', target: '节点2' }
                    ],
                    lineStyle: {
                        opacity: 1,
                        width: 2,
                        curveness: 0
                    }
                }
            ]
        };
        
        // 设置图表选项并更新尺寸
        myChart.setOption(option);
        updateDimensions();
        
        // 监听窗口大小变化
        window.addEventListener('resize', function() {
            myChart.resize();
            updateDimensions();
        });
    </script>
</body>
</html>